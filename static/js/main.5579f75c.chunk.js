(this["webpackJsonpto-do-app"]=this["webpackJsonpto-do-app"]||[]).push([[0],{42:function(t,e,n){},63:function(t,e,n){},64:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(31),s=n.n(c),i=(n(42),n(4)),o=n.n(i),u=n(8),d=n(5),l=n(36),b=n(3),j=n(32),p=n.n(j),O=function(){return p.a.create({baseURL:"https://todo-app-83232-default-rtdb.europe-west1.firebasedatabase.app"})},f=function(){var t=Object(u.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O().get("/Todo.json");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O().post("/Todo.json",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O().put("/Todo/".concat(e.id,".json"),e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O().delete("/Todo/".concat(e.id,".json"));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v="DATA",g="DONE",m="EDIT",_="ERROR",y="LOADING",N="REMOVE",D=function(t){if(t){for(var e=[],n=0,a=Object.entries(t);n<a.length;n++){var r=Object(d.a)(a[n],2),c=r[0],s=r[1];e.push(Object(b.a)({id:c},s))}return e}},L=n(1),w=Object(a.createContext)(),E={todoList:[],isLoading:!1,error:void 0},T=function(t,e){var n=e.type,a=e.payload;switch(n){case v:return Object(b.a)(Object(b.a)({},t),{},{todoList:null!==a&&void 0!==a?a:[],isLoading:!1});case"ADD":return Object(b.a)(Object(b.a)({},t),{},{todoList:[].concat(Object(l.a)(t.todoList),[a]),isLoading:!1});case g:var r=t.todoList.map((function(t){return t.id===a.id&&(t.done=a.value),t}));return Object(b.a)(Object(b.a)({},t),{},{todoList:r,isLoading:!1});case m:var c=t.todoList.map((function(t){return t.id===a.id&&(t=a),t}));return Object(b.a)(Object(b.a)({},t),{},{todoList:c,isLoading:!1});case N:var s=t.todoList.filter((function(t){return t.id!==a.id}));return Object(b.a)(Object(b.a)({},t),{},{todoList:s,isLoading:!1});case y:return Object(b.a)(Object(b.a)({},t),{},{isLoading:a});case _:return alert(a),Object(b.a)(Object(b.a)({},t),{},{isLoading:!1});default:console.error("Something went wrong")}},C=function(t){var e=t.children,n=Object(a.useReducer)(T,E),r=Object(d.a)(n,2),c=r[0],s=r[1],i=function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:y,payload:!0}),t.prev=1,t.next=4,f();case 4:e=t.sent,s({type:v,payload:D(e)}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),s({type:_,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){i()}),[]),Object(L.jsx)(w.Provider,{value:{dispatch:s,todoListState:c,setTasks:i},children:e})},S=(n(63),function(){var t=Object(a.useContext)(w),e=t.dispatch,n=t.setTasks,r=t.todoListState.isLoading,c=Object(a.useState)(""),s=Object(d.a)(c,2),i=s[0],l=s[1],b=Object(a.useState)(!1),j=Object(d.a)(b,2),p=j[0],O=j[1],f=function(){var t=Object(u.a)(o.a.mark((function t(a){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(i.length<2)){t.next=4;break}return O(!0),t.abrupt("return");case 4:return e({type:y,payload:!0}),r={name:i,done:!1,id:null},t.prev=6,t.next=9,x(r);case 9:e({type:"ADD",payload:r}),n(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),e({type:_,payload:t.t0});case 16:l(""),O(!1);case 18:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(L.jsxs)("form",{onSubmit:r?function(t){t.preventDefault()}:f,className:"addTask",children:[Object(L.jsxs)("label",{className:"addTask__label",children:["Add task",Object(L.jsx)("input",{onChange:function(t){var e=t.target.value;return l(e)},value:r?"":i,className:"addTask__input",type:"text"})]}),p&&Object(L.jsx)("p",{className:"addTask__error",children:"The task must be at least 2 characters long"}),Object(L.jsx)("button",{className:"addTask__btn",children:"add"})]})}),R=n(75),A=n(33),B=n(74),F=(n(64),"TASK_TODO"),I="TASK_DONE",J=function(t){var e=t.task,n=t.task,r=n.id,c=n.name,s=n.done,i=(t.onDropTaskTodo,t.onDropTaskDone,Object(a.useContext)(w)),l=i.dispatch,j=i.todoListState.isLoading,p=F,O=I,f=Object(a.useState)({isEditing:!1,name:""}),x=Object(d.a)(f,2),v=x[0],D=x[1],E=Object(A.useClickOutside)(),T=Object(d.a)(E,2),C=(T[0],T[1]),S=Object(a.useRef)(),R=Object(B.a)({type:p,item:e,end:function(t,e){var n=e.getDropResult();t&&n&&z(!0)},collect:function(t){return{isDragging:t.isDragging()}}}),J=Object(d.a)(R,2),K=J[0].isDragging,M=J[1],G=Object(B.a)({type:O,item:e,end:function(t,e){var n=e.getDropResult();t&&n&&z(!1)},collect:function(t){return{isDragging:t.isDragging()}}}),P=Object(d.a)(G,2),U=P[0].isDragging,V=P[1],q=function(){var t=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l({type:y,payload:!0}),t.prev=1,t.next=4,k(e);case 4:l({type:N,payload:{id:r}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),l({type:_,payload:t.t0});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),z=function(){var t=Object(u.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(b.a)(Object(b.a)({},e),{},{done:n}),l({type:y,payload:!0}),t.prev=2,t.next=5,h(a);case 5:l({type:g,payload:{id:r,value:n}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),l({type:_,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),H=Object(a.useCallback)(Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.isEditing){t.next=20;break}if(S.current.focus(),!(v.name.length<2)){t.next=4;break}return t.abrupt("return",!0);case 4:if(v.name!==c){t.next=7;break}return D({isEditing:!1}),t.abrupt("return",!0);case 7:return n=Object(b.a)(Object(b.a)({},e),{},{name:v.name}),l({type:y,payload:!0}),t.prev=9,t.next=12,h(n);case 12:l({type:m,payload:n}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(9),l({type:_,payload:t.t0});case 18:return D(Object(b.a)(Object(b.a)({},v),{},{isEditing:!1})),t.abrupt("return");case 20:D({isEditing:!0,name:c});case 21:case"end":return t.stop()}}),t,null,[[9,15]])}))),[l,v,c,e]);Object(a.useEffect)((function(){v.isEditing&&S.current.focus()}),[v.isEditing]),Object(a.useEffect)((function(){C&&v.isEditing&&H()}),[v.isEditing,H,C]);var Q=Object(L.jsxs)(L.Fragment,{children:[v.isEditing?Object(L.jsx)("input",{className:"task__input",type:"text",value:v.name,onChange:function(t){var e=t.target.value;return D(Object(b.a)(Object(b.a)({},v),{},{name:e}))},ref:S}):Object(L.jsx)("p",{className:"task__title",onClick:H,children:c}),Object(L.jsxs)("div",{className:"task__btn-box",children:[Object(L.jsx)("button",{onClick:v.isEditing?null:function(){return z(!0)},className:"task__btn-box-btn",children:"done"}),Object(L.jsx)("button",{onClick:j?null:H,className:"task__btn-box-btn",children:v.isEditing?"ok":"edit"}),Object(L.jsx)("button",{onClick:v.isEditing?null:q,className:"task__btn-box-btn",children:"x"})]})]}),W=Object(L.jsx)("li",{style:K?{backgroundColor:"#430000"}:null,ref:M,className:"task",children:Q}),X=Object(L.jsxs)("li",{style:U?{backgroundColor:"rgb(65 96 58)"}:null,ref:V,className:"task",children:[Object(L.jsx)("p",{className:"task__title task__title--done",children:c}),Object(L.jsxs)("div",{className:"task__btn-box",children:[Object(L.jsx)("button",{onClick:function(){return z(!1)},className:"task__btn-box-btn task__btn-box-btn--undo",children:"undo"}),Object(L.jsx)("button",{onClick:q,className:"task__btn-box-btn task__btn-box-btn--done",children:"x"})]})]});return Object(L.jsx)(L.Fragment,{children:s?X:W})},K=(n(65),function(){return Object(L.jsx)("div",{className:"loading-mask",children:Object(L.jsx)("div",{className:"preloader",children:Object(L.jsx)("div",{className:"c-three-dots-loader"})})})}),M=(n(66),function(){var t=Object(a.useContext)(w).todoListState,e=t.todoList,n=t.isLoading,r=F,c=I,s=Object(R.a)({accept:r,collect:function(t){return{isOver:!!t.isOver()}}}),i=Object(d.a)(s,2),o=i[0].isOver,u=i[1],l=Object(R.a)({accept:c,collect:function(t){return{isOver:!!t.isOver()}}}),b=Object(d.a)(l,2),j=b[0].isOver,p=b[1],O=e.filter((function(t){return!t.done})),f=e.filter((function(t){return t.done})).reverse(),x=O.map((function(t){return Object(L.jsx)(J,{task:t},t.id)})),h=f.map((function(t){return Object(L.jsx)(J,{task:t,taskType:"taskDone"},t.id)})),k=O.length?Object(L.jsx)("ul",{style:j?{borderBottom:"1px solid rgb(65 96 58)"}:null,ref:p,className:"tasks-box__ul",children:x}):Object(L.jsx)("p",{className:"tasks-box__info",children:"No tasks on the list"}),v=f.length?Object(L.jsx)("ul",{style:o?{borderBottom:"1px solid #430000"}:null,ref:u,className:"tasks-box__ul",children:h}):Object(L.jsx)("p",{ref:u,className:"tasks-box__info",children:"No tasks completed"}),g=Object(L.jsxs)("div",{className:"tasks-box",children:[Object(L.jsxs)("h2",{className:"tasks-box__header",children:["Tasks to do (",O.length,")"]}),k,Object(L.jsxs)("h3",{className:"tasks-box__header--done",children:["Done tasks (",f.length,")"]}),v]});return Object(L.jsx)(L.Fragment,{children:n?Object(L.jsx)(K,{}):g})}),G=(n(67),function(){return Object(L.jsx)("div",{className:"toDo",children:Object(L.jsxs)("div",{className:"toDo__container",children:[Object(L.jsx)("h1",{className:"toDo__header",children:"todo app"}),Object(L.jsxs)(C,{children:[Object(L.jsx)(S,{}),Object(L.jsx)(M,{})]})]})})}),P=n(73),U=n(35);s.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(P.a,{backend:U.a,children:Object(L.jsx)(G,{})})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.5579f75c.chunk.js.map