(this["webpackJsonpto-do-app"]=this["webpackJsonpto-do-app"]||[]).push([[0],{28:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),s=(n(28),n(3)),i=n.n(s),d=n(4),u=n(7),p=n(6),l=n(2),b=n(23),j=n.n(b),x=function(){return j.a.create({baseURL:"https://todo-app-83232-default-rtdb.europe-west1.firebasedatabase.app"})},f=function(){var e=Object(d.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().get("/Todo/todo.json");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().get("/Todo/done.json");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().post("/Todo/todo.json",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,x().put("/Todo/done/".concat(t.id,".json"),t);case 3:return e.next=5,x().delete("/Todo/todo/".concat(t.id,".json"));case 5:e.next=12;break;case 7:if(n){e.next=12;break}return e.next=10,x().put("/Todo/todo/".concat(t.id,".json"),t);case 10:return e.next=12,x().delete("/Todo/done/".concat(t.id,".json"));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,x().put("/Todo/todo.json",t);case 3:if(n){e.next=6;break}return e.next=6,x().put("/Todo/done.json",t);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().put("/Todo/todo/".concat(t.id,".json"),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,x().delete("/Todo/todo/".concat(t,".json"));case 3:if(n){e.next=6;break}return e.next=6,x().delete("/Todo/done/".concat(t,".json"));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g="DATA_TODO",_="DATA_DONE",L="CHANGE_ORDER_TODO",T="CHANGE_ORDER_DONE",w="DONE",N="EDIT",D="ERROR",E="LOADING",C="REMOVE",R=function(e){if(e){for(var t=[],n=0,a=Object.entries(e);n<a.length;n++){var r=Object(u.a)(a[n],2),c=r[0],o=r[1];t.push(Object(l.a)({id:c},o))}return t}},I=n(1),A=Object(a.createContext)(),S={todoListTodo:[],todoListDone:[],isLoading:!1,error:void 0},P=function(e,t){var n=t.type,a=t.payload;switch(n){case g:return Object(l.a)(Object(l.a)({},e),{},{todoListTodo:null!==a&&void 0!==a?a:[],isLoading:!1});case _:return Object(l.a)(Object(l.a)({},e),{},{todoListDone:null!==a&&void 0!==a?a:[],isLoading:!1});case"ADD":return Object(l.a)(Object(l.a)({},e),{},{todoList:[].concat(Object(p.a)(e.todoListTodo),[a]),isLoading:!1});case L:return Object(l.a)(Object(l.a)({},e),{},{todoListTodo:a,isLoading:!1});case T:return Object(l.a)(Object(l.a)({},e),{},{todoListDone:a,isLoading:!1});case w:return Object(l.a)(Object(l.a)({},e),{},{todoListTodo:a.newTodoList,todoListDone:a.newDoneList,isLoading:!1});case N:var r=e.todoListTodo.map((function(e){return e.id===a.id&&(e=a),e}));return Object(l.a)(Object(l.a)({},e),{},{todoListTodo:r,isLoading:!1});case C:var c=a.value?e.todoListTodo.filter((function(e){return e.id!==a.id})):e.todoListTodo,o=a.value?e.todoListDone:e.todoListDone.filter((function(e){return e.id!==a.id}));return Object(l.a)(Object(l.a)({},e),{},{todoListTodo:c,todoListDone:o,isLoading:!1});case E:return Object(l.a)(Object(l.a)({},e),{},{isLoading:a});case D:return alert(a),Object(l.a)(Object(l.a)({},e),{},{isLoading:!1});default:console.error("Something went wrong")}},H=function(e){var t=e.children,n=Object(a.useReducer)(P,S),r=Object(u.a)(n,2),c=r[0],o=r[1],s=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:E,payload:!0}),e.prev=1,e.next=4,f();case 4:t=e.sent,o({type:g,payload:R(t)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:D,payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:E,payload:!0}),e.prev=1,e.next=4,O();case 4:t=e.sent,o({type:_,payload:R(t)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:D,payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s(),p()}),[]),Object(I.jsx)(A.Provider,{value:{dispatch:o,todoListState:c,setTodoTasks:s},children:t})},F=(n(49),function(){var e=Object(a.useContext)(A),t=e.dispatch,n=e.setTodoTasks,r=e.todoListState.isLoading,c=Object(a.useState)(""),o=Object(u.a)(c,2),s=o[0],p=o[1],l=Object(a.useState)(!1),b=Object(u.a)(l,2),j=b[0],x=b[1],f=function(){var e=Object(d.a)(i.a.mark((function e(a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!(s.length<2)){e.next=4;break}return x(!0),e.abrupt("return");case 4:return t({type:E,payload:!0}),r={name:s,done:!1,type:"todo",id:null},e.prev=6,e.next=9,h(r);case 9:t({type:"ADD",payload:r}),n(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),t({type:D,payload:e.t0});case 16:p(""),x(!1);case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("form",{onSubmit:r?function(e){e.preventDefault()}:f,className:"addTask",children:[Object(I.jsxs)("label",{className:"addTask__label",children:["Add task",Object(I.jsx)("input",{onChange:function(e){var t=e.target.value;return p(t)},value:r?"":s,className:"addTask__input",type:"text"})]}),j&&Object(I.jsx)("p",{className:"addTask__error",children:"The task must be at least 2 characters long"}),Object(I.jsx)("button",{className:"addTask__btn",children:"add"})]})}),G=n(8),J=(n(50),function(e){var t=e.task,n=e.index,r=e.task,c=r.id,o=r.name,s=r.done,b=Object(a.useContext)(A),j=b.dispatch,x=b.todoListState,f=x.isLoading,O=x.todoListTodo,h=x.todoListDone,y=Object(a.useState)({isEditing:!1,name:""}),g=Object(u.a)(y,2),_=g[0],L=g[1],T=Object(a.useRef)(),R=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({type:E,payload:!0}),e.prev=1,e.next=4,m(c,t);case 4:j({type:C,payload:{id:c,value:t}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j({type:D,payload:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(i.a.mark((function e(n,a){var r,c,o,s,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(l.a)(Object(l.a)({},t),{},{done:n,type:a}),j({type:E,payload:!0}),!n){e.next=17;break}return c=O.filter((function(e){return e.id!==t.id})),(o=Object(p.a)(h)).push(r),e.prev=6,e.next=9,k(r,n);case 9:j({type:w,payload:{newTodoList:c,newDoneList:o}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),j({type:D,payload:e.t0});case 15:e.next=29;break;case 17:return s=h.filter((function(e){return e.id!==t.id})),(d=Object(p.a)(O)).push(r),e.prev=20,e.next=23,k(r,n);case 23:j({type:w,payload:{newTodoList:d,newDoneList:s}}),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(20),j({type:D,payload:e.t1});case 29:case"end":return e.stop()}}),e,null,[[6,12],[20,26]])})));return function(t,n){return e.apply(this,arguments)}}(),P=Object(a.useCallback)(Object(d.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.isEditing){e.next=20;break}if(T.current.focus(),!(_.name.length<2)){e.next=4;break}return e.abrupt("return",!0);case 4:if(_.name!==o){e.next=7;break}return L({isEditing:!1}),e.abrupt("return",!0);case 7:return n=Object(l.a)(Object(l.a)({},t),{},{name:_.name}),j({type:E,payload:!0}),e.prev=9,e.next=12,v(n);case 12:j({type:N,payload:n}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),j({type:D,payload:e.t0});case 18:return L(Object(l.a)(Object(l.a)({},_),{},{isEditing:!1})),e.abrupt("return");case 20:L({isEditing:!0,name:o});case 21:case"end":return e.stop()}}),e,null,[[9,15]])}))),[j,_,o,t]);Object(a.useEffect)((function(){_.isEditing&&T.current.focus()}),[_.isEditing]);var H=Object(I.jsxs)(I.Fragment,{children:[_.isEditing?Object(I.jsx)("input",{className:"task__input",type:"text",value:_.name,onChange:function(e){var t=e.target.value;return L(Object(l.a)(Object(l.a)({},_),{},{name:t}))},ref:T}):Object(I.jsx)("p",{className:"task__title",onClick:P,children:o}),Object(I.jsxs)("div",{className:"task__btn-box",children:[Object(I.jsx)("button",{onClick:_.isEditing?null:function(){return S(!0,"done")},className:"task__btn-box-btn",children:"done"}),Object(I.jsx)("button",{onClick:f?null:P,className:"task__btn-box-btn",children:_.isEditing?"ok":"edit"}),Object(I.jsx)("button",{onClick:_.isEditing?null:function(){return R(!0)},className:"task__btn-box-btn",children:"x"})]})]}),F=Object(I.jsx)(G.b,{draggableId:c,index:n,children:function(e){return Object(I.jsx)("li",Object(l.a)(Object(l.a)(Object(l.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"task",children:H}))}}),J=Object(I.jsx)(G.b,{draggableId:c,index:n,children:function(e){return Object(I.jsxs)("li",Object(l.a)(Object(l.a)(Object(l.a)({className:"task"},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[Object(I.jsx)("p",{className:"task__title task__title--done",children:o}),Object(I.jsxs)("div",{className:"task__btn-box",children:[Object(I.jsx)("button",{onClick:function(){return S(!1,"todo")},className:"task__btn-box-btn task__btn-box-btn--undo",children:"undo"}),Object(I.jsx)("button",{onClick:function(){return R(!1)},className:"task__btn-box-btn task__btn-box-btn--done",children:"x"})]})]}))}});return Object(I.jsx)(I.Fragment,{children:s?J:F})}),M=(n(55),function(){return Object(I.jsx)("div",{className:"loading-mask",children:Object(I.jsx)("div",{className:"preloader",children:Object(I.jsx)("div",{className:"c-three-dots-loader"})})})}),B=(n(56),function(){var e=Object(a.useContext)(A),t=e.dispatch,n=e.todoListState,r=n.todoListTodo,c=n.todoListDone,o=n.isLoading,s=function(){var e=Object(d.a)(i.a.mark((function e(n){var a,o,s,d,u,l,b,j,x,f,O,h,k,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.destination,o=n.source,a){e.next=3;break}return e.abrupt("return");case 3:if(a.droppableId!==o.droppableId||a.index!==o.index){e.next=5;break}return e.abrupt("return");case 5:if(s=o.droppableId,d=a.droppableId,s!==d){e.next=39;break}if("todo"!==o.droppableId){e.next=24;break}return t({type:E,payload:!0}),l=(u=r).splice(o.index,1),u.splice.apply(u,[a.index,0].concat(Object(p.a)(l))),e.prev=13,e.next=16,y(u,!0);case 16:t({type:L,payload:u}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(13),t({type:D,payload:e.t0});case 22:e.next=37;break;case 24:return t({type:E,payload:!0}),j=(b=c).splice(o.index,1),b.splice.apply(b,[a.index,0].concat(Object(p.a)(j))),e.prev=28,e.next=31,y(b,!1);case 31:t({type:T,payload:b}),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(28),t({type:D,payload:e.t1});case 37:e.next=81;break;case 39:if("todo"!==s||"done"!==d){e.next=62;break}return t({type:E,payload:!0}),f=c,(O=(x=r).splice(o.index,1))[0].done=!O[0].done,f.splice.apply(f,[a.index,0].concat(Object(p.a)(O))),t({type:L,payload:x}),t({type:T,payload:f}),e.prev=48,e.next=51,y(x,!0);case 51:return e.next=53,y(f,!1);case 53:t({type:L,payload:x}),t({type:T,payload:f}),e.next=60;break;case 57:e.prev=57,e.t2=e.catch(48),t({type:D,payload:e.t2});case 60:e.next=81;break;case 62:if("done"!==s||"todo"!==d){e.next=81;break}return t({type:E,payload:!0}),k=r,(v=(h=c).splice(o.index,1))[0].done=!v[0].done,k.splice.apply(k,[a.index,0].concat(Object(p.a)(v))),e.prev=69,e.next=72,y(k,!0);case 72:return e.next=74,y(h,!1);case 74:t({type:L,payload:k}),t({type:T,payload:h}),e.next=81;break;case 78:e.prev=78,e.t3=e.catch(69),t({type:D,payload:e.t3});case 81:case"end":return e.stop()}}),e,null,[[13,19],[28,34],[48,57],[69,78]])})));return function(t){return e.apply(this,arguments)}}(),u=r.map((function(e,t){return Object(I.jsx)(J,{index:t,task:e},e.id)})),b=c.map((function(e,t){return Object(I.jsx)(J,{index:t,task:e},e.id)})),j=r.length?Object(I.jsx)("ul",{className:"tasks-box__ul",children:u}):Object(I.jsx)("p",{className:"tasks-box__info",children:"No tasks on the list"}),x=c.length?Object(I.jsx)("ul",{className:"tasks-box__ul",children:b}):Object(I.jsx)("p",{className:"tasks-box__info",children:"No tasks completed"}),f=Object(I.jsx)(G.a,{onDragEnd:s,children:Object(I.jsxs)("div",{className:"tasks-box",children:[Object(I.jsx)(G.c,{droppableId:"todo",children:function(e){return Object(I.jsxs)("div",Object(l.a)(Object(l.a)({ref:e.innerRef},e.droppableProps),{},{className:"tasks-box-todo",children:[Object(I.jsxs)("h2",{className:"tasks-box__header",children:["Tasks to do (",r.length,")"]}),j,e.placeholder]}))}}),Object(I.jsx)(G.c,{droppableId:"done",children:function(e){return Object(I.jsxs)("div",Object(l.a)(Object(l.a)({className:"tasks-box-done",ref:e.innerRef},e.droppableProps),{},{children:[Object(I.jsxs)("h3",{className:"tasks-box__header--done",children:["Done tasks (",c.length,")"]}),x,e.placeholder]}))}})]})});return Object(I.jsx)(I.Fragment,{children:o?Object(I.jsx)(M,{}):f})}),U=(n(57),function(){return Object(I.jsx)("div",{className:"toDo",children:Object(I.jsxs)("div",{className:"toDo__container",children:[Object(I.jsx)("h1",{className:"toDo__header",children:"todo app"}),Object(I.jsxs)(H,{children:[Object(I.jsx)(F,{}),Object(I.jsx)(B,{})]})]})})});o.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(U,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.4f79e5f5.chunk.js.map