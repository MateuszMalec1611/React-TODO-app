(this["webpackJsonpto-do-app"]=this["webpackJsonpto-do-app"]||[]).push([[0],{28:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),s=(n(28),n(3)),i=n.n(s),d=n(4),u=n(7),b=n(5),p=n(2),l=n(23),j=n.n(l),x=function(){return j.a.create({baseURL:"https://todo-app-83232-default-rtdb.europe-west1.firebasedatabase.app"})},f=function(){var e=Object(d.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().get("/Todo.json");case 2:return t=e.sent,n=t.data,e.abrupt("return",null!==n&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().post("/Todo/todo.json",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,x().put("/Todo/done/".concat(t.id,".json"),t);case 3:return e.next=5,x().delete("/Todo/todo/".concat(t.id,".json"));case 5:e.next=12;break;case 7:if(n){e.next=12;break}return e.next=10,x().put("/Todo/todo/".concat(t.id,".json"),t);case 10:return e.next=12,x().delete("/Todo/done/".concat(t.id,".json"));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().put("/Todo/todo/".concat(t.id,".json"),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,x().delete("/Todo/todo/".concat(t,".json"));case 3:if(n){e.next=6;break}return e.next=6,x().delete("/Todo/done/".concat(t,".json"));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m="DATA_TODO",g="CHANGE_ORDER_TODO",T="DONE",_="EDIT",w="ERROR",L="LOADING",N="REMOVE",D=function(e){if(e){for(var t=[],n=0,a=Object.entries(e);n<a.length;n++){var r=Object(u.a)(a[n],2),c=r[0],o=r[1];t.push(Object(p.a)({id:c},o))}return t}},E=n(1),C=Object(a.createContext)(),R={todoListTodo:[],todoListDone:[],isLoading:!1,error:void 0},I=function(e,t){var n,a,r=t.type,c=t.payload;switch(r){case m:return Object(p.a)(Object(p.a)({},e),{},{todoListTodo:null!==(n=c.todo)&&void 0!==n?n:[],todoListDone:null!==(a=c.done)&&void 0!==a?a:[],isLoading:!1});case"ADD":return Object(p.a)(Object(p.a)({},e),{},{todoList:[].concat(Object(b.a)(e.todoListTodo),[c]),isLoading:!1});case g:return Object(p.a)(Object(p.a)({},e),{},{todoListTodo:c.newTasksOrderTodo,todoListDone:c.newTasksOrderDone,isLoading:!1});case T:return Object(p.a)(Object(p.a)({},e),{},{todoListTodo:c.newTodoList,todoListDone:c.newDoneList,isLoading:!1});case _:var o=e.todoListTodo.map((function(e){return e.id===c.id&&(e=c),e}));return Object(p.a)(Object(p.a)({},e),{},{todoListTodo:o,isLoading:!1});case N:var s=c.value?e.todoListTodo.filter((function(e){return e.id!==c.id})):e.todoListTodo,i=c.value?e.todoListDone:e.todoListDone.filter((function(e){return e.id!==c.id}));return Object(p.a)(Object(p.a)({},e),{},{todoListTodo:s,todoListDone:i,isLoading:!1});case L:return Object(p.a)(Object(p.a)({},e),{},{isLoading:c});case w:return alert(c),Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});default:console.error("Something went wrong")}},S=function(e){var t=e.children,n=Object(a.useReducer)(I,R),r=Object(u.a)(n,2),c=r[0],o=r[1],s=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:L,payload:!0}),e.prev=1,e.next=4,f();case 4:t=e.sent,o({type:m,payload:{todo:D(t.todo),done:D(t.done)}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:w,payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s()}),[]),Object(E.jsx)(C.Provider,{value:{dispatch:o,todoListState:c,setTasks:s},children:t})},A=(n(49),function(){var e=Object(a.useContext)(C),t=e.dispatch,n=e.setTasks,r=e.todoListState.isLoading,c=Object(a.useState)(""),o=Object(u.a)(c,2),s=o[0],b=o[1],p=Object(a.useState)(!1),l=Object(u.a)(p,2),j=l[0],x=l[1],f=function(){var e=Object(d.a)(i.a.mark((function e(a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!(s.length<2)){e.next=4;break}return x(!0),e.abrupt("return");case 4:return t({type:L,payload:!0}),r={name:s,done:!1,id:null},e.prev=6,e.next=9,O(r);case 9:t({type:"ADD",payload:r}),n(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),t({type:w,payload:e.t0});case 16:b(""),x(!1);case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsxs)("form",{onSubmit:r?function(e){e.preventDefault()}:f,className:"addTask",children:[Object(E.jsxs)("label",{className:"addTask__label",children:["Add task",Object(E.jsx)("input",{onChange:function(e){var t=e.target.value;return b(t)},value:r?"":s,className:"addTask__input",type:"text"})]}),j&&Object(E.jsx)("p",{className:"addTask__error",children:"The task must be at least 2 characters long"}),Object(E.jsx)("button",{className:"addTask__btn",children:"add"})]})}),P=n(8),F="TODO",H="DONE",G=(n(50),function(){return Object(E.jsx)("div",{className:"loading-mask",children:Object(E.jsx)("div",{className:"preloader",children:Object(E.jsx)("div",{className:"c-three-dots-loader"})})})}),J=(n(51),function(e){var t=e.task,n=e.index,r=e.task,c=r.id,o=r.name,s=r.done,l=Object(a.useContext)(C),j=l.dispatch,x=l.todoListState,f=x.isLoading,O=x.todoListTodo,k=x.todoListDone,m=Object(a.useState)({isEditing:!1,name:""}),g=Object(u.a)(m,2),D=g[0],R=g[1],I=Object(a.useRef)(),S=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({type:L,payload:!0}),e.prev=1,e.next=4,y(c,t);case 4:j({type:N,payload:{id:c,value:t}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j({type:w,payload:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(i.a.mark((function e(n){var a,r,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(p.a)(Object(p.a)({},t),{},{done:n}),j({type:L,payload:!0}),!n){e.next=17;break}return r=O.filter((function(e){return e.id!==t.id})),(c=Object(b.a)(k)).push(a),e.prev=6,e.next=9,h(a,n);case 9:j({type:T,payload:{newTodoList:r,newDoneList:c}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),j({type:w,payload:e.t0});case 15:e.next=30;break;case 17:if(n){e.next=30;break}return o=k.filter((function(e){return e.id!==t.id})),(s=Object(b.a)(O)).push(a),e.prev=21,e.next=24,h(a,n);case 24:j({type:T,payload:{newTodoList:s,newDoneList:o}}),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(21),j({type:w,payload:e.t1});case 30:case"end":return e.stop()}}),e,null,[[6,12],[21,27]])})));return function(t){return e.apply(this,arguments)}}(),F=Object(a.useCallback)(Object(d.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D.isEditing){e.next=19;break}if(I.current.focus(),!(D.name.length<2)){e.next=4;break}return e.abrupt("return");case 4:if(D.name!==o){e.next=7;break}return R({isEditing:!1}),e.abrupt("return");case 7:return n=Object(p.a)(Object(p.a)({},t),{},{name:D.name}),e.prev=8,e.next=11,v(n);case 11:j({type:_,payload:n}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),j({type:w,payload:e.t0});case 17:return R(Object(p.a)(Object(p.a)({},D),{},{isEditing:!1})),e.abrupt("return");case 19:R({isEditing:!0,name:o});case 20:case"end":return e.stop()}}),e,null,[[8,14]])}))),[j,D,o,t]);Object(a.useEffect)((function(){D.isEditing&&I.current.focus()}),[D.isEditing]);var H=Object(E.jsxs)(E.Fragment,{children:[D.isEditing?Object(E.jsx)("input",{className:"task__input",type:"text",value:D.name,onChange:function(e){var t=e.target.value;return R(Object(p.a)(Object(p.a)({},D),{},{name:t}))},ref:I}):Object(E.jsx)("p",{className:"task__title",onClick:F,children:o}),Object(E.jsxs)("div",{className:"task__btn-box",children:[Object(E.jsx)("button",{onClick:D.isEditing?null:function(){return A(!0)},className:"task__btn-box-btn",children:"done"}),Object(E.jsx)("button",{onClick:f?null:F,className:"task__btn-box-btn",children:D.isEditing?"ok":"edit"}),Object(E.jsx)("button",{onClick:D.isEditing?null:function(){return S(!0)},className:"task__btn-box-btn",children:"x"})]})]}),G=Object(E.jsx)(P.b,{draggableId:c,index:n,children:function(e){return Object(E.jsx)("li",Object(p.a)(Object(p.a)(Object(p.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"task",children:H}))}}),J=Object(E.jsx)(P.b,{draggableId:c,index:n,children:function(e){return Object(E.jsxs)("li",Object(p.a)(Object(p.a)(Object(p.a)({className:"task"},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[Object(E.jsx)("p",{className:"task__title task__title--done",children:o}),Object(E.jsxs)("div",{className:"task__btn-box",children:[Object(E.jsx)("button",{onClick:function(){return A(!1)},className:"task__btn-box-btn task__btn-box-btn--undo",children:"undo"}),Object(E.jsx)("button",{onClick:function(){return S(!1)},className:"task__btn-box-btn task__btn-box-btn--done",children:"x"})]})]}))}});return Object(E.jsx)(E.Fragment,{children:s?J:G})}),M=(n(56),function(){var e=Object(a.useContext)(C),t=e.dispatch,n=e.todoListState,r=n.todoListTodo,c=n.todoListDone,o=n.isLoading,s=function(){var e=Object(d.a)(i.a.mark((function e(n){var a,o,s,d,u,p,l,j,x,f,O,h,v,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.destination,o=n.source,a){e.next=3;break}return e.abrupt("return");case 3:if(a.droppableId!==o.droppableId||a.index!==o.index){e.next=5;break}return e.abrupt("return");case 5:if(s=o.droppableId,d=a.droppableId,s!==d){e.next=39;break}if(o.droppableId!==F){e.next=24;break}return t({type:L,payload:!0}),u=Object(b.a)(r),p=u.splice(o.index,1),u.splice.apply(u,[a.index,0].concat(Object(b.a)(p))),e.prev=13,e.next=16,k(u,!0);case 16:t({type:g,payload:{newTasksOrderTodo:u,newTasksOrderDone:c}}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(13),t({type:w,payload:e.t0+"order"});case 22:e.next=37;break;case 24:return t({type:L,payload:!0}),l=Object(b.a)(c),j=l.splice(o.index,1),l.splice.apply(l,[a.index,0].concat(Object(b.a)(j))),e.prev=28,e.next=31,l.forEach((function(e){return k(e,!1)}));case 31:t({type:g,payload:{newTasksOrderDone:l,newTasksOrderTodo:r}}),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(28),t({type:w,payload:e.t1});case 37:e.next=77;break;case 39:if(s!==F||d!==H){e.next=59;break}return t({type:L,payload:!0}),x=Object(b.a)(r),f=Object(b.a)(c),(O=x.splice(o.index,1))[0].done=!O[0].done,f.splice.apply(f,[a.index,0].concat(Object(b.a)(O))),e.prev=46,e.next=49,x.forEach((function(e){return k(e,!0)}));case 49:return e.next=51,f.forEach((function(e){return k(e,!1)}));case 51:t({type:g,payload:{newTasksOrderDone:f,newTasksOrderTodo:x}}),e.next=57;break;case 54:e.prev=54,e.t2=e.catch(46),t({type:w,payload:e.t2});case 57:e.next=77;break;case 59:if(s!==H||d!==F){e.next=77;break}return t({type:L,payload:!0}),h=Object(b.a)(c),v=Object(b.a)(r),(y=h.splice(o.index,1))[0].done=!y[0].done,v.splice.apply(v,[a.index,0].concat(Object(b.a)(y))),e.prev=66,e.next=69,v.forEach((function(e){return k(e,!0)}));case 69:return e.next=71,h.forEach((function(e){return k(e,!1)}));case 71:t({type:g,payload:{newTasksOrderDone:h,newTasksOrderTodo:v}}),e.next=77;break;case 74:e.prev=74,e.t3=e.catch(66),t({type:w,payload:e.t3});case 77:case"end":return e.stop()}}),e,null,[[13,19],[28,34],[46,54],[66,74]])})));return function(t){return e.apply(this,arguments)}}(),u=r.map((function(e,t){return Object(E.jsx)(J,{index:t,task:e},e.id)})),l=c.map((function(e,t){return Object(E.jsx)(J,{index:t,task:e},e.id)})),j=r.length?Object(E.jsx)("ul",{className:"tasks-box__ul",children:u}):Object(E.jsx)("p",{className:"tasks-box__info",children:"No tasks on the list"}),x=c.length?Object(E.jsx)("ul",{className:"tasks-box__ul",children:l}):Object(E.jsx)("p",{className:"tasks-box__info",children:"No tasks completed"}),f=Object(E.jsx)(P.a,{onDragEnd:s,children:Object(E.jsxs)("div",{className:"tasks-box",children:[Object(E.jsx)(P.c,{droppableId:F,children:function(e){return Object(E.jsxs)("div",Object(p.a)(Object(p.a)({ref:e.innerRef},e.droppableProps),{},{className:"tasks-box-todo",children:[Object(E.jsxs)("h2",{className:"tasks-box__header",children:["Tasks to do (",r.length,")"]}),j,e.placeholder]}))}}),Object(E.jsx)(P.c,{droppableId:H,children:function(e){return Object(E.jsxs)("div",Object(p.a)(Object(p.a)({className:"tasks-box-done",ref:e.innerRef},e.droppableProps),{},{children:[Object(E.jsxs)("h3",{className:"tasks-box__header--done",children:["Done tasks (",c.length,")"]}),x,e.placeholder]}))}})]})});return Object(E.jsx)(E.Fragment,{children:o?Object(E.jsx)(G,{}):f})}),B=(n(57),function(){return Object(E.jsx)("div",{className:"toDo",children:Object(E.jsxs)("div",{className:"toDo__container",children:[Object(E.jsx)("h1",{className:"toDo__header",children:"todo app"}),Object(E.jsxs)(S,{children:[Object(E.jsx)(A,{}),Object(E.jsx)(M,{})]})]})})});o.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(B,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.614d21d0.chunk.js.map