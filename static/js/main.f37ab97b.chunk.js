(this["webpackJsonpto-do-app"]=this["webpackJsonpto-do-app"]||[]).push([[0],{30:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),s=(n(30),n(3)),i=n.n(s),d=n(4),u=n(7),b=n(5),l=n(2),p=n(23),j=n.n(p),f=function(){return j.a.create({baseURL:"https://todo-app-83232-default-rtdb.europe-west1.firebasedatabase.app"})},x=function(){var e=Object(d.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("/Todo.json");case 2:return t=e.sent,n=t.data,e.abrupt("return",null!==n&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().post("/Todo/todo.json",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,f().put("/Todo/done/".concat(t.id,".json"),t);case 3:return e.next=5,f().delete("/Todo/todo/".concat(t.id,".json"));case 5:e.next=12;break;case 7:if(n){e.next=12;break}return e.next=10,f().put("/Todo/todo/".concat(t.id,".json"),t);case 10:return e.next=12,f().delete("/Todo/done/".concat(t.id,".json"));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(i.a.mark((function e(t,n,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,f().put("/Todo/todo/".concat(t.id,".json"),t);case 3:if(n){e.next=6;break}return e.next=6,f().put("/Todo/done/".concat(t.id,".json"),t);case 6:if(n||!a){e.next=13;break}return e.next=9,f().put("/Todo/done/".concat(t.id,".json"),t);case 9:return e.next=11,f().delete("/Todo/todo/".concat(t.id,".json"));case 11:e.next=18;break;case 13:if(!n||!a){e.next=18;break}return e.next=16,f().put("/Todo/todo/".concat(t.id,".json"),t);case 16:return e.next=18,f().delete("/Todo/done/".concat(t.id,".json"));case 18:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().put("/Todo/todo/".concat(t.id,".json"),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,f().delete("/Todo/todo/".concat(t,".json"));case 3:if(n){e.next=6;break}return e.next=6,f().delete("/Todo/done/".concat(t,".json"));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y="DATA_TODO",g="CHANGE_ORDER_TODO",T="DONE",_="EDIT",L="ERROR",w="LOADING",N="REMOVE",D=function(e){if(e){for(var t=[],n=0,a=Object.entries(e);n<a.length;n++){var r=Object(u.a)(a[n],2),o=r[0],c=r[1];t.push(Object(l.a)({id:o},c))}return t}},E=n(1),C=Object(a.createContext)(),R={todoListTodo:[],todoListDone:[],isLoading:!1,error:void 0},I=function(e,t){var n,a,r=t.type,o=t.payload;switch(r){case y:return o.todo&&o.todo.sort((function(e,t){return e.order-t.order})),o.done&&o.done.sort((function(e,t){return e.order-t.order})),Object(l.a)(Object(l.a)({},e),{},{todoListTodo:null!==(n=o.todo)&&void 0!==n?n:[],todoListDone:null!==(a=o.done)&&void 0!==a?a:[],isLoading:!1});case"ADD":return Object(l.a)(Object(l.a)({},e),{},{todoList:[].concat(Object(b.a)(e.todoListTodo),[o]),isLoading:!1});case g:return Object(l.a)(Object(l.a)({},e),{},{todoListTodo:o.newTasksOrderTodo,todoListDone:o.newTasksOrderDone,isLoading:!1});case T:return Object(l.a)(Object(l.a)({},e),{},{todoListTodo:o.newTodoList,todoListDone:o.newDoneList,isLoading:!1});case _:var c=e.todoListTodo.map((function(e){return e.id===o.id&&(e=o),e}));return Object(l.a)(Object(l.a)({},e),{},{todoListTodo:c,isLoading:!1});case N:var s=o.value?e.todoListTodo.filter((function(e){return e.id!==o.id})):e.todoListTodo,i=o.value?e.todoListDone:e.todoListDone.filter((function(e){return e.id!==o.id}));return Object(l.a)(Object(l.a)({},e),{},{todoListTodo:s,todoListDone:i,isLoading:!1});case w:return Object(l.a)(Object(l.a)({},e),{},{isLoading:o});case L:return alert(o),Object(l.a)(Object(l.a)({},e),{},{isLoading:!1});default:console.error("Something went wrong")}},S=function(e){var t=e.children,n=Object(a.useReducer)(I,R),r=Object(u.a)(n,2),o=r[0],c=r[1],s=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:w,payload:!0}),e.prev=1,e.next=4,x();case 4:t=e.sent,c({type:y,payload:{todo:D(t.todo),done:D(t.done)}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:L,payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s()}),[]),Object(E.jsx)(C.Provider,{value:{dispatch:c,todoListState:o,setTasks:s},children:t})},A=(n(51),function(){var e=Object(a.useContext)(C),t=e.dispatch,n=e.setTasks,r=e.todoListState.isLoading,o=Object(a.useState)(""),c=Object(u.a)(o,2),s=c[0],b=c[1],l=Object(a.useState)(!1),p=Object(u.a)(l,2),j=p[0],f=p[1],x=function(){var e=Object(d.a)(i.a.mark((function e(a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!(s.length<2)){e.next=4;break}return f(!0),e.abrupt("return");case 4:return t({type:w,payload:!0}),r={name:s,done:!1,id:null,order:null},e.prev=6,e.next=9,O(r);case 9:t({type:"ADD",payload:r}),n(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),t({type:L,payload:e.t0});case 16:b(""),f(!1);case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsxs)("form",{onSubmit:r?function(e){e.preventDefault()}:x,className:"addTask",children:[Object(E.jsxs)("label",{className:"addTask__label",children:["Add task",Object(E.jsx)("input",{onChange:function(e){var t=e.target.value;return b(t)},value:r?"":s,className:"addTask__input",type:"text"})]}),j&&Object(E.jsx)("p",{className:"addTask__error",children:"The task must be at least 2 characters long"}),Object(E.jsx)("button",{className:"addTask__btn",children:"add"})]})}),P=n(8),F="TODO",H="DONE",G=(n(52),function(){return Object(E.jsx)("div",{className:"loading-mask",children:Object(E.jsx)("div",{className:"preloader",children:Object(E.jsx)("div",{className:"c-three-dots-loader"})})})}),J=n(24),M=n.n(J),B=n(25),U=(n(53),function(e){var t=e.task,n=e.index,r=e.task,o=r.id,c=r.name,s=r.done,p=Object(a.useContext)(C),j=p.dispatch,f=p.todoListState,x=f.isLoading,O=f.todoListTodo,k=f.todoListDone,y=Object(a.useState)({isEditing:!1,name:""}),g=Object(u.a)(y,2),D=g[0],R=g[1],I=Object(B.useClickOutside)(),S=Object(u.a)(I,2),A=S[0],F=S[1],H=Object(a.useRef)(),G=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({type:w,payload:!0}),e.prev=1,e.next=4,m(o,t);case 4:j({type:N,payload:{id:o,value:t}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j({type:L,payload:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(i.a.mark((function e(n){var a,r,o,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(l.a)(Object(l.a)({},t),{},{done:n}),j({type:w,payload:!0}),!n){e.next=17;break}return r=O.filter((function(e){return e.id!==t.id})),(o=Object(b.a)(k)).push(a),e.prev=6,e.next=9,h(a,n);case 9:j({type:T,payload:{newTodoList:r,newDoneList:o}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),j({type:L,payload:e.t0});case 15:e.next=30;break;case 17:if(n){e.next=30;break}return c=k.filter((function(e){return e.id!==t.id})),(s=Object(b.a)(O)).push(a),e.prev=21,e.next=24,h(a,n);case 24:j({type:T,payload:{newTodoList:s,newDoneList:c}}),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(21),j({type:L,payload:e.t1});case 30:case"end":return e.stop()}}),e,null,[[6,12],[21,27]])})));return function(t){return e.apply(this,arguments)}}(),U=Object(a.useCallback)(Object(d.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D.isEditing){e.next=19;break}if(H.current.focus(),!(D.name.length<2)){e.next=4;break}return e.abrupt("return");case 4:if(D.name!==c){e.next=7;break}return R({isEditing:!1}),e.abrupt("return");case 7:return n=Object(l.a)(Object(l.a)({},t),{},{name:D.name}),e.prev=8,e.next=11,v(n);case 11:j({type:_,payload:n}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),j({type:L,payload:e.t0});case 17:return R(Object(l.a)(Object(l.a)({},D),{},{isEditing:!1})),e.abrupt("return");case 19:R({isEditing:!0,name:c});case 20:case"end":return e.stop()}}),e,null,[[8,14]])}))),[j,D,c,t]);Object(a.useEffect)((function(){D.isEditing&&H.current.focus()}),[D.isEditing]),Object(a.useEffect)((function(){F&&D.isEditing&&U()}),[D.isEditing,U,F]);var V=Object(E.jsxs)(E.Fragment,{children:[D.isEditing?Object(E.jsx)("input",{className:"task__input",type:"text",value:D.name,onChange:function(e){var t=e.target.value;return R(Object(l.a)(Object(l.a)({},D),{},{name:t}))},ref:H}):Object(E.jsx)("p",{className:"task__title",onClick:U,children:c}),Object(E.jsxs)("div",{className:"task__btn-box",children:[Object(E.jsx)("button",{onClick:D.isEditing?null:function(){return J(!0)},className:"task__btn-box-btn",children:"done"}),Object(E.jsx)("button",{onClick:x?null:U,className:"task__btn-box-btn",children:D.isEditing?"ok":"edit"}),Object(E.jsx)("button",{onClick:D.isEditing?null:function(){return G(!0)},className:"task__btn-box-btn",children:"x"})]})]}),q=Object(E.jsx)(P.b,{draggableId:o,index:n,children:function(e){return Object(E.jsx)("li",Object(l.a)(Object(l.a)(Object(l.a)({},e.draggableProps),e.dragHandleProps),{},{ref:M()(e.innerRef,A),className:"task",children:V}))}}),z=Object(E.jsx)(P.b,{draggableId:o,index:n,children:function(e){return Object(E.jsxs)("li",Object(l.a)(Object(l.a)(Object(l.a)({className:"task"},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[Object(E.jsx)("p",{className:"task__title task__title--done",children:c}),Object(E.jsxs)("div",{className:"task__btn-box",children:[Object(E.jsx)("button",{onClick:function(){return J(!1)},className:"task__btn-box-btn task__btn-box-btn--undo",children:"undo"}),Object(E.jsx)("button",{onClick:function(){return G(!1)},className:"task__btn-box-btn task__btn-box-btn--done",children:"x"})]})]}))}});return Object(E.jsx)(E.Fragment,{children:s?z:q})}),V=(n(58),function(){var e=Object(a.useContext)(C),t=e.dispatch,n=e.todoListState,r=n.todoListTodo,o=n.todoListDone,c=n.isLoading,s=function(){var e=Object(d.a)(i.a.mark((function e(n){var a,c,s,d,u,l,p,j,f,x,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.destination,c=n.source,a){e.next=3;break}return e.abrupt("return");case 3:if(a.droppableId!==c.droppableId||a.index!==c.index){e.next=5;break}return e.abrupt("return");case 5:if(t({type:w,payload:!0}),s=c.droppableId,d=a.droppableId,s!==d){e.next=40;break}if(c.droppableId!==F){e.next=25;break}return u=Object(b.a)(r),l=u.splice(c.index,1),u.splice.apply(u,[a.index,0].concat(Object(b.a)(l))),u.forEach((function(e,t){return e.order=t})),e.prev=14,e.next=17,u.forEach((function(e){return k(e,!0,!1)}));case 17:t({type:g,payload:{newTasksOrderTodo:u,newTasksOrderDone:o}}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),t({type:L,payload:e.t0+"order"});case 23:e.next=38;break;case 25:return p=Object(b.a)(o),j=p.splice(c.index,1),p.splice.apply(p,[a.index,0].concat(Object(b.a)(j))),p.forEach((function(e,t){return e.order=t})),e.prev=29,e.next=32,p.forEach((function(e){return k(e,!1,!1)}));case 32:t({type:g,payload:{newTasksOrderDone:p,newTasksOrderTodo:r}}),e.next=38;break;case 35:e.prev=35,e.t1=e.catch(29),t({type:L,payload:e.t1});case 38:e.next=62;break;case 40:if(s===d){e.next=62;break}return f=Object(b.a)(r),x=Object(b.a)(o),O=[],s===F&&d===H&&(O=f.splice(c.index,1)),s===H&&d===F&&(O=x.splice(c.index,1)),O[0].done=!O[0].done,s===F&&d===H&&x.splice.apply(x,[a.index,0].concat(Object(b.a)(O))),s===H&&d===F&&f.splice.apply(f,[a.index,0].concat(Object(b.a)(O))),x.forEach((function(e,t){return e.order=t})),f.forEach((function(e,t){return e.order=t})),e.prev=51,e.next=54,f.forEach((function(e){return k(e,!0,"order")}));case 54:return e.next=56,x.forEach((function(e){return k(e,!1,"order")}));case 56:t({type:g,payload:{newTasksOrderDone:x,newTasksOrderTodo:f}}),e.next=62;break;case 59:e.prev=59,e.t2=e.catch(51),t({type:L,payload:e.t2});case 62:case"end":return e.stop()}}),e,null,[[14,20],[29,35],[51,59]])})));return function(t){return e.apply(this,arguments)}}(),u=r.map((function(e,t){return Object(E.jsx)(U,{index:t,task:e},e.id)})),p=o.map((function(e,t){return Object(E.jsx)(U,{index:t,task:e},e.id)})),j=r.length?Object(E.jsx)("ul",{className:"tasks-box__ul",children:u}):Object(E.jsx)("p",{className:"tasks-box__info",children:"No tasks on the list"}),f=o.length?Object(E.jsx)("ul",{className:"tasks-box__ul",children:p}):Object(E.jsx)("p",{className:"tasks-box__info",children:"No tasks completed"}),x=Object(E.jsx)(P.a,{onDragEnd:s,children:Object(E.jsxs)("div",{className:"tasks-box",children:[Object(E.jsx)(P.c,{droppableId:F,children:function(e){return Object(E.jsxs)("div",Object(l.a)(Object(l.a)({ref:e.innerRef},e.droppableProps),{},{className:"tasks-box-todo",children:[Object(E.jsxs)("h2",{className:"tasks-box__header",children:["Tasks to do (",r.length,")"]}),j,e.placeholder]}))}}),Object(E.jsx)(P.c,{droppableId:H,children:function(e){return Object(E.jsxs)("div",Object(l.a)(Object(l.a)({className:"tasks-box-done",ref:e.innerRef},e.droppableProps),{},{children:[Object(E.jsxs)("h3",{className:"tasks-box__header--done",children:["Done tasks (",o.length,")"]}),f,e.placeholder]}))}})]})});return Object(E.jsx)(E.Fragment,{children:c?Object(E.jsx)(G,{}):x})}),q=(n(59),function(){return Object(E.jsx)("div",{className:"toDo",children:Object(E.jsxs)("div",{className:"toDo__container",children:[Object(E.jsx)("h1",{className:"toDo__header",children:"todo app"}),Object(E.jsxs)(S,{children:[Object(E.jsx)(A,{}),Object(E.jsx)(V,{})]})]})})});c.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(q,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.f37ab97b.chunk.js.map