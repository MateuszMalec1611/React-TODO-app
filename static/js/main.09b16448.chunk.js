(this["webpackJsonpto-do-app"]=this["webpackJsonpto-do-app"]||[]).push([[0],{26:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var a=n(2),r=n.n(a),c=n(18),s=n.n(c),i=(n(26),n(3)),o=n.n(i),u=n(5),d=n(6),l=n(21),b=n(1),j=n(19),p=n.n(j),f=function(){return p.a.create({baseURL:"https://todo-app-83232-default-rtdb.europe-west1.firebasedatabase.app"})},O=function(){var t=Object(u.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f().get("/Todo.json");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f().post("/Todo.json",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f().put("/Todo/".concat(e.id,".json"),e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f().delete("/Todo/".concat(e.id,".json"));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v="DATA",m="DONE",_="EDIT",g="ERROR",y="LOADING",N="REMOVE",L=function(t){if(t){for(var e=[],n=0,a=Object.entries(t);n<a.length;n++){var r=Object(d.a)(a[n],2),c=r[0],s=r[1];e.push(Object(b.a)({id:c},s))}return e}},w=n(0),E=Object(a.createContext)(),T={todoList:[],isLoading:!1,error:void 0},C=function(t,e){var n=e.type,a=e.payload;switch(n){case v:return Object(b.a)(Object(b.a)({},t),{},{todoList:null!==a&&void 0!==a?a:[],isLoading:!1});case"ADD":return Object(b.a)(Object(b.a)({},t),{},{todoList:[].concat(Object(l.a)(t.todoList),[a]),isLoading:!1});case m:var r=t.todoList.map((function(t){return t.id===a.id&&(t.done=a.value),t}));return Object(b.a)(Object(b.a)({},t),{},{todoList:r,isLoading:!1});case _:var c=t.todoList.map((function(t){return t.id===a.id&&(t=a),t}));return Object(b.a)(Object(b.a)({},t),{},{todoList:c,isLoading:!1});case N:var s=t.todoList.filter((function(t){return t.id!==a.id}));return Object(b.a)(Object(b.a)({},t),{},{todoList:s,isLoading:!1});case y:return Object(b.a)(Object(b.a)({},t),{},{isLoading:a});case g:return alert(a),Object(b.a)(Object(b.a)({},t),{},{isLoading:!1});default:console.error("Something went wrong")}},D=function(t){var e=t.children,n=Object(a.useReducer)(C,T),r=Object(d.a)(n,2),c=r[0],s=r[1],i=function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:y,payload:!0}),t.prev=1,t.next=4,O();case 4:e=t.sent,s({type:v,payload:L(e)}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),s({type:g,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){i()}),[]),Object(w.jsx)(E.Provider,{value:{dispatch:s,todoListState:c,setTasks:i},children:e})},S=(n(47),function(){var t=Object(a.useContext)(E),e=t.dispatch,n=t.setTasks,r=t.todoListState.isLoading,c=Object(a.useState)(""),s=Object(d.a)(c,2),i=s[0],l=s[1],b=Object(a.useState)(!1),j=Object(d.a)(b,2),p=j[0],f=j[1],O=function(){var t=Object(u.a)(o.a.mark((function t(a){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(i.length<2)){t.next=4;break}return f(!0),t.abrupt("return");case 4:return e({type:y,payload:!0}),r={name:i,done:!1,id:null},t.prev=6,t.next=9,x(r);case 9:e({type:"ADD",payload:r}),n(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),e({type:g,payload:t.t0});case 16:l(""),f(!1);case 18:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(w.jsxs)("form",{onSubmit:r?function(t){t.preventDefault()}:O,className:"addTask",children:[Object(w.jsxs)("label",{className:"addTask__label",children:["Add task",Object(w.jsx)("input",{onChange:function(t){var e=t.target.value;return l(e)},value:r?"":i,className:"addTask__input",type:"text"})]}),p&&Object(w.jsx)("p",{className:"addTask__error",children:"The task must be at least 2 characters long"}),Object(w.jsx)("button",{className:"addTask__btn",children:"add"})]})}),R=n(20),A=(n(48),function(t){var e=t.task,n=t.task,r=n.id,c=n.name,s=n.done,i=Object(a.useContext)(E),l=i.dispatch,j=i.todoListState.isLoading,p=Object(a.useState)({isEditing:!1,name:""}),f=Object(d.a)(p,2),O=f[0],x=f[1],v=Object(R.useClickOutside)(),L=Object(d.a)(v,2),T=L[0],C=L[1],D=Object(a.useRef)(),S=function(){var t=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l({type:y,payload:!0}),t.prev=1,t.next=4,k(e);case 4:l({type:N,payload:{id:r}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),l({type:g,payload:t.t0});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(u.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(b.a)(Object(b.a)({},e),{},{done:n}),l({type:y,payload:!0}),t.prev=2,t.next=5,h(a);case 5:l({type:m,payload:{id:r,value:n}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),l({type:g,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),F=Object(a.useCallback)(Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!O.isEditing){t.next=20;break}if(D.current.focus(),!(O.name.length<2)){t.next=4;break}return t.abrupt("return",!0);case 4:if(O.name!==c){t.next=7;break}return x({isEditing:!1}),t.abrupt("return",!0);case 7:return n=Object(b.a)(Object(b.a)({},e),{},{name:O.name}),l({type:y,payload:!0}),t.prev=9,t.next=12,h(n);case 12:l({type:_,payload:n}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(9),l({type:g,payload:t.t0});case 18:return x(Object(b.a)(Object(b.a)({},O),{},{isEditing:!1})),t.abrupt("return");case 20:x({isEditing:!0,name:c});case 21:case"end":return t.stop()}}),t,null,[[9,15]])}))),[l,O,c,e]);Object(a.useEffect)((function(){O.isEditing&&D.current.focus()}),[O.isEditing]),Object(a.useEffect)((function(){C&&O.isEditing&&F()}),[O.isEditing,F,C]);var I=Object(w.jsxs)(w.Fragment,{children:[O.isEditing?Object(w.jsx)("input",{className:"task__input",type:"text",value:O.name,onChange:function(t){var e=t.target.value;return x(Object(b.a)(Object(b.a)({},O),{},{name:e}))},ref:D}):Object(w.jsx)("p",{className:"task__title",onClick:F,children:c}),Object(w.jsxs)("div",{className:"task__btn-box",children:[Object(w.jsx)("button",{onClick:O.isEditing?null:function(){return A(!0)},className:"task__btn-box-btn",children:"done"}),Object(w.jsx)("button",{onClick:j?null:F,className:"task__btn-box-btn",children:O.isEditing?"ok":"edit"}),Object(w.jsx)("button",{onClick:O.isEditing?null:S,className:"task__btn-box-btn",children:"x"})]})]}),J=Object(w.jsx)("li",{ref:T,className:"task",children:I}),M=Object(w.jsxs)("li",{className:"task",children:[Object(w.jsx)("p",{className:"task__title task__title--done",children:c}),Object(w.jsxs)("div",{className:"task__btn-box",children:[Object(w.jsx)("button",{onClick:function(){return A(!1)},className:"task__btn-box-btn task__btn-box-btn--undo",children:"undo"}),Object(w.jsx)("button",{onClick:S,className:"task__btn-box-btn task__btn-box-btn--done",children:"x"})]})]});return Object(w.jsx)(w.Fragment,{children:s?M:J})}),F=(n(49),function(){return Object(w.jsx)("div",{className:"loading-mask",children:Object(w.jsx)("div",{className:"preloader",children:Object(w.jsx)("div",{className:"c-three-dots-loader"})})})}),I=(n(50),function(){var t=Object(a.useContext)(E).todoListState,e=t.todoList,n=t.isLoading,r=e.filter((function(t){return!t.done})),c=e.filter((function(t){return t.done})).reverse(),s=r.map((function(t){return Object(w.jsx)(A,{task:t},t.id)})),i=c.map((function(t){return Object(w.jsx)(A,{task:t},t.id)})),o=r.length?Object(w.jsx)("ul",{className:"tasks-box__ul",children:s}):Object(w.jsx)("p",{className:"tasks-box__info",children:"No tasks on the list"}),u=c.length?Object(w.jsx)("ul",{className:"tasks-box__ul",children:i}):Object(w.jsx)("p",{className:"tasks-box__info",children:"No tasks completed"}),d=Object(w.jsxs)("div",{className:"tasks-box",children:[Object(w.jsxs)("h2",{className:"tasks-box__header",children:["Tasks to do (",r.length,")"]}),o,Object(w.jsxs)("h3",{className:"tasks-box__header--done",children:["Done tasks (",c.length,")"]}),u]});return Object(w.jsx)(w.Fragment,{children:n?Object(w.jsx)(F,{}):d})}),J=(n(51),function(){return Object(w.jsx)("div",{className:"toDo",children:Object(w.jsxs)("div",{className:"toDo__container",children:[Object(w.jsx)("h1",{className:"toDo__header",children:"todo app"}),Object(w.jsxs)(D,{children:[Object(w.jsx)(S,{}),Object(w.jsx)(I,{})]})]})})});s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(J,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.09b16448.chunk.js.map